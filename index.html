<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahmed Gharib | AGBINSIGHTS</title>
    
    <link rel="icon" type="image/png" href="agb-logo.png.1.jpeg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { 
            --main-blue: #0056b3; 
            --bg-white: #ffffff; 
            --deep-black: #000000;
            --text-gray: #555555; 
            --glow-effect: 0 4px 15px rgba(0, 86, 179, 0.2);
        }

       body { background-color: var(--bg-white); color: var(--deep-black); font-family: 'Inter', sans-serif; margin: 0; text-align: center; scroll-behavior: smooth; overflow-x: hidden; }
       body.rtl { direction: rtl; font-family: 'Cairo', sans-serif; }
       
        #welcome-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--bg-white);
            display: flex; align-items: center; justify-content: center; 
            z-index: 10000; transition: 0.8s ease-in-out; 
        }
        .welcome-box { text-align: center; padding: 20px; }
        .welcome-logo { width: 120px; height: 120px; margin-bottom: 25px; border-radius: 50%; border: 3px solid var(--main-blue); object-fit: contain; }
        
        .start-btn { 
            background: var(--main-blue); color: white; padding: 15px 40px; 
            border: none; border-radius: 50px; font-weight: 900; cursor: pointer; 
            margin-top: 30px; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: var(--glow-effect); transition: 0.3s;
        }
        .start-btn:hover { transform: scale(1.05); background: #004494; }

        #main-site { opacity: 0; display: none; }
        
        nav { 
            width: 100%; padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); background: var(--bg-white);
            position: sticky; top: 0; z-index: 1000; box-sizing: border-box; direction: ltr !important;
        }

        .nav-logo-img { height: 80px; width: auto; cursor: pointer; mix-blend-mode: multiply; filter: contrast(1.1); }
        .lang-switch { display: flex; gap: 12px; align-items: center; }
        .flag-btn { width: 32px; height: 32px; cursor: pointer; border-radius: 50%; opacity: 0.5; transition: 0.3s; object-fit: cover; border: 2px solid transparent; }
        .flag-btn.active { opacity: 1; border: 2px solid var(--main-blue); transform: scale(1.1); }

        header { padding: 80px 20px; }
        h1 { font-size: clamp(35px, 8vw, 75px); margin: 0; font-weight: 900; }
        .typewriter-text { color: var(--main-blue); font-size: 18px; font-weight: 700; min-height: 24px; margin-top: 10px; letter-spacing: 2px; text-transform: uppercase; }
        .about-text { max-width: 800px; margin: 25px auto; color: var(--text-gray); font-size: 17px; line-height: 1.8; }

        .section-title { 
            text-align: left; margin: 60px 0 30px 10%; color: var(--deep-black); 
            border-left: 5px solid var(--main-blue); padding-left: 15px; 
            font-weight: 900; font-size: 28px;
        }
        body.rtl .section-title { text-align: right; border-left: none; border-right: 5px solid var(--main-blue); padding-right: 15px; margin: 60px 10% 30px 0; }

        .grid-container, .process-flow { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; padding: 0 10%; margin-bottom: 50px; }
        
        .card-3d, .process-step { 
            background: var(--bg-white); border: 1px solid #eee; 
            padding: 30px 20px; flex: 1 1 150px; max-width: 220px;
            border-radius: 20px; transition: all 0.4s; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.02);
        }
        .card-3d:hover, .process-step:hover { transform: translateY(-10px); border-color: var(--main-blue); box-shadow: 0 10px 25px rgba(0,86,179,0.1); }
        .card-3d i, .process-step i { font-size: 35px; color: var(--main-blue); margin-bottom: 15px; }

        @media (max-width: 480px) {
            .grid-container, .process-flow { display: grid; grid-template-columns: repeat(2, 1fr); padding: 0 15px; }
            .card-3d, .process-step { max-width: 100%; padding: 20px 10px; }
        }

        .project-item { 
            display: flex; flex-direction: column; background: var(--bg-white); 
            border: 1px solid #eee; border-radius: 25px; overflow: hidden; margin: 0 10% 40px;
            transition: 0.4s;
        }
        @media (min-width: 768px) {
            .project-item { flex-direction: row; }
            .p-img { width: 60%; } .p-text { width: 40%; padding: 40px; text-align: left; display: flex; flex-direction: column; justify-content: center; }
            body.rtl .p-text { text-align: right; }
        }
        .p-img img { width: 100%; height: auto; display: block; }
        .btn-view { border: 2px solid var(--main-blue); color: var(--main-blue); padding: 12px 25px; border-radius: 12px; cursor: pointer; display: inline-block; margin-top: 20px; font-weight: 800; }
        .btn-view:hover { background: var(--main-blue); color: #fff; }

        #case-study-view { display:none; background: var(--bg-white); padding: 40px 10%; text-align: left; }
        body.rtl #case-study-view { text-align: right; }
        .case-header { background: #f9f9f9; padding: 30px; border-radius: 20px; border-left: 6px solid var(--main-blue); margin-bottom: 30px; }
        body.rtl .case-header { border-left: none; border-right: 6px solid var(--main-blue); }

        .rating-input-section { margin-bottom: 30px; padding: 30px; background: #f9f9f9; border-radius: 20px; text-align: center; }
        .stars { font-size: 24px; margin-bottom: 10px; cursor: pointer; color: #ccc; }
        .stars .fa-star.active { color: #ffce00; }
        .rating-input { width: 100%; max-width: 400px; padding: 12px; border: 1px solid #ddd; border-radius: 10px; margin-bottom: 10px; }

        body.dark-theme { --bg-white: #0a0a0a; --deep-black: #ffffff; --text-gray: #aaaaaa; }
        body.dark-theme nav { background: #000; }
        body.dark-theme .card-3d, body.dark-theme .process-step, body.dark-theme .project-item, body.dark-theme .case-header, body.dark-theme .rating-input-section { background: #111; border-color: #222; }
        body.dark-theme .nav-logo-img, body.dark-theme .welcome-logo { mix-blend-mode: normal; filter: none; }

        .reveal { opacity: 0; transform: translateY(30px); transition: 0.8s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }
        
        footer { padding: 60px 20px; margin-top: 50px; }
        .social-icons a { color: var(--deep-black); font-size: 30px; margin: 0 15px; transition: 0.3s; }
        .social-icons a:hover { color: var(--main-blue); }
    </style>
</head>
<body>

<div id="welcome-overlay">
    <div class="welcome-box">
       <img src="agb-logo-png.png" class="welcome-logo" id="welcome-logo-img">
       <h2 id="welcome-name">Ahmed Gharib</h2>
       <p id="welcome-tagline">Turning Complex Data into Strategic Assets</p>
       <button class="start-btn" onclick="startExploring()" id="welcome-btn">Explore Insights</button>
    </div>
</div>

<div id="main-site">
    <nav>
        <div class="nav-brand"><img src="agb-logo-png.png" class="nav-logo-img" id="nav-logo-img" onclick="location.reload()"></div>
        <div class="lang-switch">
            <img src="https://flagcdn.com/w40/gb.png" class="flag-btn" id="lang-en" onclick="setLang('en')">
            <img src="https://flagcdn.com/w40/eg.png" class="flag-btn" id="lang-ar" onclick="setLang('ar')">
            <img src="https://flagcdn.com/w40/es.png" class="flag-btn" id="lang-es" onclick="setLang('es')">
            <div id="dark-mode-toggle" onclick="toggleDarkMode()" style="cursor:pointer; font-size: 22px; color:var(--main-blue);"><i class="fas fa-moon"></i></div>
        </div>
    </nav>

    <header>
        <h1 id="main-name">Ahmed Gharib</h1>
        <div class="typewriter-text" id="job-title-type"></div>
        <p class="about-text" id="about-me"></p>
    </header>

    <div class="section-title" id="title-journey"></div>
    <div class="process-flow">
        <div class="process-step reveal" onclick="showJourney('understand')" style="cursor:pointer"><i class="fas fa-bullseye"></i><h4 id="step1"></h4></div>
        <div class="process-step reveal" onclick="showJourney('extract')" style="cursor:pointer"><i class="fas fa-download"></i><h4 id="step2"></h4></div>
        <div class="process-step reveal" onclick="showJourney('clean')" style="cursor:pointer"><i class="fas fa-broom"></i><h4 id="step3"></h4></div>
        <div class="process-step reveal" onclick="showJourney('model')" style="cursor:pointer"><i class="fas fa-layer-group"></i><h4 id="step4"></h4></div>
        <div class="process-step reveal" onclick="showJourney('insight')" style="cursor:pointer"><i class="fas fa-chart-line"></i><h4 id="step5"></h4></div>
    </div>

    <div class="section-title" id="title-expertise"></div>
    <div class="grid-container"> 
        <div class="card-3d reveal"><i class="fas fa-chart-bar"></i><span>Power BI</span></div>
        <div class="card-3d reveal"><i class="fas fa-file-excel"></i><span>Excel</span></div>
        <div class="card-3d reveal"><i class="fas fa-database"></i><span id="skill3">Modeling</span></div>
        <div class="card-3d reveal"><i class="fas fa-calculator"></i><span id="skill4">DAX</span></div>
        <div class="card-3d reveal"><i class="fas fa-gears"></i><span>ETL</span></div>
        <div class="card-3d reveal"><i class="fas fa-eye"></i><span id="skill6">Viz</span></div>
    </div>

    <div class="section-title" id="title-projects"></div>
    <div class="projects-wrapper">
        <div class="project-item reveal"> 
            <div class="p-img"><img src="hr.png.png"></div>
            <div class="p-text"><h3 id="p1-title"></h3><div class="btn-view" onclick="showStudy('hr')" id="p1-btn"></div></div>
        </div>
        <div class="project-item reveal">
            <div class="p-img"><img src="sales.png1.png"></div>
            <div class="p-text"><h3 id="p2-title"></h3><div class="btn-view" onclick="showStudy('sales')" id="p2-btn"></div></div>
        </div>
    </div>

    <div class="section-title" id="title-ratings"></div>
    <div class="grid-container">
        <div class="card-3d reveal" onclick="openRatingsPage()" style="cursor: pointer; max-width: 280px; border: 2px dashed var(--main-blue);">
            <i class="fas fa-star" style="color: #ffce00; opacity: 1;"></i>
            <h4 id="view-ratings-text"></h4>
        </div>
    </div>

    <footer>
        <div class="social-icons">
            <a href="https://www.linkedin.com/in/ahmed-gharib-20989a272/" target="_blank"><i class="fab fa-linkedin"></i></a>
            <a href="mailto:info@agbinsights.com"><i class="fas fa-envelope"></i></a>
        </div>
        <p style="margin-top: 20px; opacity: 0.5; font-size: 13px;">© 2025 AHMED GHARIB | AGBINSIGHTS</p>
    </footer>
</div>

<div id="case-study-view">
    <div onclick="hideStudy()" id="back-btn" style="color:var(--main-blue); cursor:pointer; font-weight:bold; margin-bottom:30px;"></div>
    <div id="case-header-content"></div>
    <div id="study-images"></div>
</div>

<script>
    let currentLang = localStorage.getItem('ahmedLang') || 'en';
    let isDarkMode = localStorage.getItem('ahmedDarkMode') === 'true';
    let lastScrollPos = 0;
    let selectedRating = 5;
    const SHEETDB_URL = 'https://sheetdb.io/api/v1/jv44e0ygedwit';

    const translations = {
        en: {
            name: "Ahmed Gharib", welcomeBtn: "Explore Insights", 
            jobs: ["Data Analyst", "BI Developer", "Power BI Specialist"],
            tagline: "Turning Complex Data into Actionable Insights",
            about: "I bridge the gap between <b>raw data</b> and <b>business success</b>. Specialized in architecting end-to-end Power BI solutions that empower decision-makers.",
            journey: "01. Working Process", expertise: "02. Technical Skills", projects: "03. Featured Work", ratings: "04. Client Reviews",
            step1: "Understand", step2: "Extract", step3: "Clean", step4: "Model", step5: "Insight",
            skill3: "Modeling", skill4: "DAX Logic", skill6: "Visualization",
            viewBtn: "View Project", back: "← BACK TO HOME", viewRatings: "Read & Add Reviews",
            loading: "Fetching reviews...", ratePrompt: "How was your experience?", namePlace: "Your Name", ratePlace: "Your Feedback...", rateBtn: "Post Review",
            obj: "OBJECTIVE", ch: "CHALLENGE", sol: "SOLUTION", imp: "IMPACT", tool: "TOOLS", thanks: "Thank you for your feedback!"
        },
        ar: {
            name: "أحمد غريب", welcomeBtn: "استكشف الرؤى",
            jobs: ["محلل بيانات", "مطور ذكاء أعمال", "خبير Power BI"],
            tagline: "تحويل البيانات المعقدة إلى رؤى استراتيجية",
            about: "أقوم بسد الفجوة بين <b>البيانات الخام</b> و<b>نجاح الأعمال</b>. متخصص في بناء حلول Power BI متكاملة تمكّن صناع القرار.",
            journey: "01. منهجية العمل", expertise: "02. الخبرات التقنية", projects: "03. معرض المشاريع", ratings: "04. آراء العملاء",
            step1: "الفهم", step2: "استخراج", step3: "تنظيف", step4: "نمذجة", step5: "رؤية",
            skill3: "نمذجة", skill4: "منطق DAX", skill6: "تصوير بيانات",
            viewBtn: "عرض التفاصيل", back: "← العودة للرئيسية", viewRatings: "عرض وإضافة التقييمات",
            loading: "جاري تحميل التقييمات...", ratePrompt: "كيف كانت تجربتك؟", namePlace: "الاسم", ratePlace: "رأيك يهمنا...", rateBtn: "إرسال التقييم",
            obj: "الهدف", ch: "التحدي", sol: "الحل", imp: "الأثر", tool: "الأدوات", thanks: "شكراً لتقييمك!"
        },
        es: {
            name: "Ahmed Gharib", welcomeBtn: "Explorar",
            jobs: ["Analista de Datos", "Desarrollador BI", "Experto Power BI"],
            tagline: "Convirtiendo Datos en Activos Estratégicos",
            about: "Convierto datos complejos en <b>decisiones inteligentes</b>. Especialista en soluciones integrales de Power BI.",
            journey: "01. Proceso", expertise: "02. Habilidades", projects: "03. Proyectos", ratings: "04. Reseñas",
            step1: "Entender", step2: "Extraer", step3: "Limpiar", step4: "Modelar", step5: "Insight",
            skill3: "Modelado", skill4: "DAX", skill6: "Visualización",
            viewBtn: "Ver Proyecto", back: "← VOLVER", viewRatings: "Ver Reseñas",
            loading: "Cargando...", ratePrompt: "¿Cómo fue su experiencia?", namePlace: "Nombre", ratePlace: "Comentario...", rateBtn: "Enviar",
            obj: "OBJETIVO", ch: "DESAFÍO", sol: "SOLUCIÓN", imp: "IMPACTO", tool: "HERRAMIENTAS", thanks: "¡Gracias!"
        }
    };

    const journeyData = {
        understand: { en: { title: "Understand", desc: "Defining clear objectives and business KPIs." }, ar: { title: "مرحلة الفهم", desc: "تحديد الأهداف واحتياجات العمل بدقة." }, es: { title: "Entender", desc: "Definición de objetivos." } },
        extract: { en: { title: "Extract", desc: "Connecting sources (Excel, Web) to gather raw info." }, ar: { title: "استخراج البيانات", desc: "ربط المصادر لجمع المعلومات المطلوبة." }, es: { title: "Extraer", desc: "Conexión de fuentes." } },
        clean: { en: { title: "Clean", desc: "Power Query transformation and error fixing." }, ar: { title: "تنظيف البيانات", desc: "معالجة الأخطاء وتنقية البيانات بجودة عالية." }, es: { title: "Limpiar", desc: "Transformación de datos." } },
        model: { en: { title: "Model", desc: "Creating relationships and complex DAX logic." }, ar: { title: "النمذجة", desc: "بناء العلاقات البرمجية وصيغ DAX المعقدة." }, es: { title: "Modelar", desc: "Relaciones y DAX." } },
        insight: { en: { title: "Insights", desc: "Final visualization and decision-ready dashboards." }, ar: { title: "الرؤى النهائية", desc: "تصميم لوحات تفاعلية تدعم اتخاذ القرار." }, es: { title: "Insights", desc: "Visualización final." } }
    };

    const projectData = {
        hr: { en: { title: "HR Attrition Hub", o: "Analyze turnover.", c: "High attrition.", s: "Full BI solution.", i: "Retention improved.", t: "Power BI, DAX" }, ar: { title: "تحليل استقالات الموظفين", o: "تحديد أسباب ترك العمل.", c: "معدل دوران عالٍ.", s: "حل BI متكامل.", i: "تحسين معدل الاستبقاء.", t: "Power BI, DAX" }, es: { title: "RRHH Hub", o: "Analizar rotación.", c: "Alta rotación.", s: "Solución BI.", i: "Mejora retención.", t: "Power BI, DAX" }, imgs: ['hr.png.png', 'hr.png2.png', 'hr.png3.png'] },
        sales: { en: { title: "Sales Insight Engine", o: "Centralize data.", c: "Data silos.", s: "Unified ETL pipeline.", i: "Real-time tracking.", t: "Excel, Power BI" }, ar: { title: "محرك رؤى المبيعات", o: "مركزية البيانات.", c: "تشتت البيانات.", s: "مسار ETL موحد.", i: "تتبع لحظي للأداء.", t: "Excel, Power BI" }, es: { title: "Ventas Engine", o: "Centralizar datos.", c: "Silos de datos.", s: "Pipeline ETL.", i: "Seguimiento real.", t: "Excel, Power BI" }, imgs: ['sales.png1.png', 'sales.png2.png', 'sales.png3.png'] }
    };

    // --- Core Logic ---
    function updateUI() {
        const t = translations[currentLang];
        document.body.className = currentLang === 'ar' ? 'rtl' : '';
        if (isDarkMode) document.body.classList.add('dark-theme');
        else document.body.classList.remove('dark-theme');

        document.getElementById('welcome-name').innerText = t.name;
        document.getElementById('welcome-tagline').innerText = t.tagline;
        document.getElementById('welcome-btn').innerText = t.welcomeBtn;
        document.getElementById('main-name').innerText = t.name;
        document.getElementById('about-me').innerHTML = t.about;
        
        ['journey','expertise','projects','ratings','view-ratings-text','step1','step2','step3','step4','step5','skill3','skill4','skill6','p1-btn','p2-btn','back-btn'].forEach(id => {
            const el = document.getElementById(id.startsWith('title-') ? id : (id.startsWith('p') ? id : id));
            if(translations[currentLang][id]) { if(document.getElementById(id)) document.getElementById(id).innerText = translations[currentLang][id]; }
            if(document.getElementById('title-'+id)) document.getElementById('title-'+id).innerText = translations[currentLang][id];
        });

        document.getElementById('p1-title').innerText = projectData.hr[currentLang].title;
        document.getElementById('p2-title').innerText = projectData.sales[currentLang].title;
        
        document.querySelectorAll('.flag-btn').forEach(f => f.classList.remove('active'));
        document.getElementById('lang-' + currentLang).classList.add('active');
        document.getElementById('dark-mode-toggle').innerHTML = isDarkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        
        const logo = isDarkMode ? "agb-logo.png.1.jpeg" : "agb-logo-png.png";
        document.getElementById('nav-logo-img').src = logo;
        document.getElementById('welcome-logo-img').src = logo;
    }

    // Advanced Typewriter
    let jobIdx = 0, charIdx = 0, isDeleting = false;
    function typeEffect() {
        const jobs = translations[currentLang].jobs;
        const currentJob = jobs[jobIdx % jobs.length];
        const display = isDeleting ? currentJob.substring(0, charIdx--) : currentJob.substring(0, charIdx++);
        document.getElementById('job-title-type').innerText = display;

        let speed = isDeleting ? 50 : 150;
        if (!isDeleting && charIdx === currentJob.length + 1) { isDeleting = true; speed = 2000; }
        else if (isDeleting && charIdx === 0) { isDeleting = false; jobIdx++; speed = 500; }
        setTimeout(typeEffect, speed);
    }

    function startExploring() {
        document.getElementById('welcome-overlay').style.transform = 'translateY(-100%)';
        setTimeout(() => {
            document.getElementById('welcome-overlay').style.display = 'none';
            document.getElementById('main-site').style.display = 'block';
            setTimeout(() => { 
                document.getElementById('main-site').style.opacity = '1'; 
                updateUI(); 
                typeEffect();
            }, 50);
        }, 800);
    }

    function showJourney(id) {
        lastScrollPos = window.scrollY;
        const d = journeyData[id][currentLang];
        document.getElementById('case-header-content').innerHTML = `<div class="case-header"><h2>${d.title}</h2><p style="font-size:18px">${d.desc}</p></div>`;
        document.getElementById('study-images').innerHTML = "";
        document.getElementById('main-site').style.display = 'none';
        document.getElementById('case-study-view').style.display = 'block';
        window.scrollTo(0,0);
    }

    function showStudy(id) {
        lastScrollPos = window.scrollY;
        const d = projectData[id][currentLang], t = translations[currentLang];
        document.getElementById('case-header-content').innerHTML = `
            <div class="case-header">
                <h2>${d.title}</h2>
                <p><b>${t.obj}:</b> ${d.o}</p>
                <p><b>${t.sol}:</b> ${d.s}</p>
                <p><b>${t.tool}:</b> ${d.t}</p>
            </div>`;
        document.getElementById('study-images').innerHTML = projectData[id].imgs.map(img => `<img src="${img}" style="width:100%; border-radius:15px; margin-bottom:20px; box-shadow:0 10px 20px rgba(0,0,0,0.1)">`).join('');
        document.getElementById('main-site').style.display = 'none';
        document.getElementById('case-study-view').style.display = 'block';
        window.scrollTo(0,0);
    }

    function hideStudy() {
        document.getElementById('case-study-view').style.display = 'none';
        document.getElementById('main-site').style.display = 'block';
        window.scrollTo(0, lastScrollPos);
    }

    function setLang(l) { currentLang = l; localStorage.setItem('ahmedLang', l); updateUI(); }
    function toggleDarkMode() { isDarkMode = !isDarkMode; localStorage.setItem('ahmedDarkMode', isDarkMode); updateUI(); }

    function openRatingsPage() {
        lastScrollPos = window.scrollY;
        const t = translations[currentLang];
        document.getElementById('case-header-content').innerHTML = `
            <div class="rating-input-section">
                <h4>${t.ratePrompt}</h4>
                <div class="stars" id="star-rating">
                    ${[1,2,3,4,5].map(v => `<i class="fas fa-star active" data-value="${v}" onclick="setRating(${v})"></i>`).join('')}
                </div>
                <input type="text" id="user-name" class="rating-input" placeholder="${t.namePlace}"><br>
                <textarea id="user-comment" class="rating-input" rows="3" placeholder="${t.ratePlace}"></textarea><br>
                <button class="start-btn" style="padding:10px 30px" onclick="submitRating()">${t.rateBtn}</button>
            </div>
            <div id="ratings-display-inner" class="grid-container"><p>${t.loading}</p></div>`;
        document.getElementById('study-images').innerHTML = "";
        document.getElementById('main-site').style.display = 'none';
        document.getElementById('case-study-view').style.display = 'block';
        window.scrollTo(0,0);
        fetchReviews();
    }

    function setRating(v) { selectedRating = v; document.querySelectorAll('#star-rating i').forEach(s => s.classList.toggle('active', s.dataset.value <= v)); }

    function fetchReviews() {
        fetch(SHEETDB_URL).then(res => res.json()).then(data => {
            const container = document.getElementById('ratings-display-inner');
            container.innerHTML = data.reverse().map(rev => `
                <div class="card-3d" style="max-width:100%; text-align:left; cursor:default; flex: 1 1 300px">
                    <strong style="color:var(--main-blue)">${rev.Name}</strong>
                    <p style="font-style:italic; font-size:14px; margin: 10px 0;">"${rev.Feedback}"</p>
                    <div style="color:#ffce00">${'★'.repeat(rev.Rating || 5)}${'☆'.repeat(5-(rev.Rating || 5))}</div>
                </div>`).join('');
        }).catch(() => document.getElementById('ratings-display-inner').innerHTML = "Error loading reviews.");
    }

    function submitRating() {
        const name = document.getElementById('user-name').value, comment = document.getElementById('user-comment').value;
        if(!name || !comment) return;
        fetch(SHEETDB_URL, {
            method: 'POST', headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({data: [{Name: name, Feedback: comment, Rating: selectedRating, Date: new Date().toLocaleDateString()}]})
        }).then(() => { alert(translations[currentLang].thanks); openRatingsPage(); });
    }

    window.addEventListener('scroll', () => {
        document.querySelectorAll('.reveal').forEach(el => {
            if (el.getBoundingClientRect().top < window.innerHeight - 50) el.classList.add('active');
        });
    });

    window.onload = updateUI;
</script>

</body>
</html>
